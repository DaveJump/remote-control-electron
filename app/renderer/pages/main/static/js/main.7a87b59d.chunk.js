(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[0],{1:function(e,n){e.exports=require("electron")},12:function(e,n,t){var r=t(2),c=t(32),a=t(1).ipcRenderer;e.exports={initIceCandidate:function(e){if(e){var n=[];return{listen:function(n){e.onicecandidate=function(e){e.candidate&&(console.log("ice-candidate",e.candidate),a.send("forward",n,e.candidate.toJSON()))}},addIceCandidate:function(t){return c(r.mark((function c(){var a;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t&&n.push(t),!e.remoteDescription||!e.remoteDescription.type){r.next=9;break}a=0;case 3:if(!(a<n.length)){r.next=9;break}return r.next=6,e.addIceCandidate(new RTCIceCandidate(n[a]));case 6:a++,r.next=3;break;case 9:case"end":return r.stop()}}),c)})))()}}}}}},17:function(e,n,t){},31:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var r=t(3),c=t.n(r),a=t(11),o=t.n(a),i=(t(17),t(2)),s=t.n(i),u=t(4),d=t(5),p=t(1),l=t(7),f=(t(31),t(12));function h(){return b.apply(this,arguments)}function b(){return b=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(u.a)(s.a.mark((function e(n,t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.desktopCapturer.getSources({types:["screen"]});case 2:r=e.sent,navigator.webkitGetUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r[0].id,maxWidth:1280,maxHeight:720}}},(function(e){n(e)}),(function(e){t(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var v=new window.RTCPeerConnection({}),j=Object(f.initIceCandidate)(v);function x(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,v.addStream(t),e.next=6,v.setRemoteDescription(n);case 6:return e.t0=v,e.next=9,v.createAnswer();case 9:return e.t1=e.sent,e.next=12,e.t0.setLocalDescription.call(e.t0,e.t1);case 12:return console.log(JSON.stringify(v.localDescription)),e.abrupt("return",v.localDescription);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}j.listen("puppet-candidate"),p.ipcRenderer.on("offer",function(){var e=Object(u.a)(s.a.mark((function e(n,t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:r=e.sent,p.ipcRenderer.send("forward","answer",{type:r.type,sdp:r.sdp});case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),p.ipcRenderer.on("candidate",(function(e,n){j.addIceCandidate(n)})),v.addEventListener("datachannel",(function(e){"robotChannel"===e.channel.label&&(e.channel.onmessage=function(e){var n=JSON.parse(e.data),t=n.type,r=n.data;"mouse"===t&&(r.screen={width:window.screen.width,height:window.screen.height}),p.ipcRenderer.send("robot",t,r)})}));var m=t(0);var O=function(){var e=Object(r.useState)(""),n=Object(d.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),o=Object(d.a)(a,2),i=o[0],f=o[1],h=Object(r.useState)(""),b=Object(d.a)(h,2),v=b[0],j=b[1];Object(r.useEffect)((function(){return w(),p.ipcRenderer.on("control-state-change",x),function(){p.ipcRenderer.removeListener("control-state-change",x)}}),[]);var x=Object(r.useCallback)((function(e,n,t){var r="";1===t?r="\u6b63\u5728\u8fdc\u7a0b\u63a7\u5236".concat(n):2===t&&(r="\u6b63\u5728\u88ab".concat(n,"\u8fdc\u7a0b\u63a7\u5236")),f(r)}),[]),w=function(){var e=Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.ipcRenderer.invoke("login");case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"control-main",children:i.length?Object(m.jsx)("div",{className:"control-text",children:i}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"local-code",children:["Local control code:"," ",Object(m.jsx)("span",{onContextMenu:function(e){var n=new l.Menu;n.append(new l.MenuItem({label:"Copy",role:"copy"})),n.popup()},children:t})]}),Object(m.jsxs)("div",{className:"operator",children:[Object(m.jsx)("input",{placeholder:"Enter remote control code",type:"text",value:v,onInput:function(e){return j(e.target.value)}}),Object(m.jsx)("button",{onClick:function(){p.ipcRenderer.send("control",v)},children:"Confirm"})]})]})})};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.7a87b59d.chunk.js.map